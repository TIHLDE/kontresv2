// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

//Har ikke funnet en måte prisma kan importere fra types.ts, må manuellt passe på at disse stemmer overens
enum ReservationState {
    PENDING
    APPROVED 
    REJECTED 
}

model BookableItem {
    itemId          Int       @id @default(autoincrement())
    name            String
    description     String
    allowsAlcohol   Boolean
    groupId         String
    group           Group @relation(fields: [groupId], references: [groupId])
    reservations    Reservation[]
    FAQs            FAQ[] 
    @@index([name])
}

model Group {
    groupId String @id
    name    String

    BookableItem BookableItem[]
}

model Reservation {
    reservationId              Int @id @default(autoincrement())
    authorId        String
    bookableItem    BookableItem @relation(fields: [bookableItemId], references: [itemId])
    bookableItemId  Int
    startTime       DateTime
    endTime         DateTime
    status          ReservationState @default(PENDING)
    description     String
    acceptedRules   Boolean
    groupId         String
    servesAlcohol   Boolean
    soberWatch      String?
    approvedById    String?
}

model FAQ {
    questionId      Int @id @default(autoincrement())
    question        String
    answer          String
    group           String?
    author          String
    bookableItems   BookableItem[]
    imageUrl        String
}
